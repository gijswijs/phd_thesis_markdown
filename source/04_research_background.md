# Research background

Bitcoin [@Nakamoto2008] is a fully decentralized cryptocurrency that can operate in a trustless environment. Bitcoin was the first cryptocurrency that solved the Byzantine Generals Problem [@Lamport1982] in the *specific context* of cryptocurrency, by incentivizing the nodes in a network to behave honest, and by embracing randomness. The latter meaning that there's a Bayesian approach to the confirmation of a transaction, meaning that the certainty of a transaction approaches 100% asymptotically over time.
Because a decentralized cryptocurrency operates without a trusted, central party, participants need to have a way to trust the protocol without relying on another party. This is primarily achieved by broadcasting *all* transactions transparently on to the blockchain. This gives participants in the Bitcoin network the opportunity to download the entire blockchain to verify that transactions are valid, and that the sender of a payment of which they are the receiver isn't trying to double spend their coins.

The broadcast of transactions happens trough a P2P network of nodes, that generates one block of transactions every 10 minutes. A new block of transactions points to its predecessor by means of a hash pointer, resulting in a chain of blocks that gets extended with a new block every 10 minutes. The resulting data structure is called a blockchain, and this data structure is one of the key contributions of the original paper. The size of a single block is limited to 1MB. With a basic transaction taking up 250 bytes and an average transaction size of 500 bytes the network has a maximum capacity of 4000 transactions per block and an average capacity of 2000 transactions per block. This boils down to 3-7 transactions per second.

Increasing this capacity by either increasing the block size or the rate at which blocks are generated reduces the security of the Bitcoin network [@Sompolinsky2015]. Increasing scalability of Bitcoin without abandoning security remains desirable. Firstly because if the amount of transactions being broadcasted exceeds the capacity of the network, the law of supply and demand dictates that the transaction fees will increase [@Jordan2019] Secondly, if we want to achieve a viable alternative to current centralized payment networks we need to achieve comparable throughput which is in the order of magnitude of several thousand transactions per second.

The transparency of all transactions means that privacy and anonymity can only be achieved by separating the transaction of the identities of the participants performing the transaction. This separation of transaction and identity is obtained by asymmetric encryption where the hash of the public key acts as an account number or address.  These addresses act as pseudonyms for the participant. The anonymity that is achieved by this separation knows its limits, and a lot of research has been done to show those limits [@Meiklejohn2013, @Herrera-Joancomart2015, @Harlev2018].

The limitations with regards to privacy and capacity provided the incentive for several improvement proposals. These proposals can be categorized into three different categories:

- Alt-coins, new cryptocurrencies that are completely separate from Bitcoin
- Protocol improvements, improvements to the Bitcoin protocol itself
- Second layer improvements, overlays that run on top of the Bitcoin blockchain and don't require any or only small modifications to the Bitcoin protocol

Payment Channel Networks (PCN's) are an example of the latter type of improvement. PCN's improve both privacy and capacity and as such hit two birds with one stone. PCN's achieve higher throughput by keeping transactions off-chain, meaning they don't get broadcasted unto the blockchain. This is made possible by opening up payment channels between participants, and keep private off-chain balances of transactions between any two participants. Upon closing of a payment channel the final balance is broadcasted to the Bitcoin blockchain. This way the amount of transactions that need to be broadcasted is drastically reduced. Theoretically this could lead to throughputs of PCN's that rival those of VISA and other global payment networks. Lightning Network (LN) [@Poon2016] is the first PCN that has been put into production and runs on top of Bitcoin.

The improved anonymity of LN is comparable to the anonymity achieved improvements that have the sole goal to increase anonymity, like Mixcoin, Blindcoin and TumbleBit [@Conti2018]. The lack of a rigorous definition of the PCN protocols, the absence of a threat model, and the ambivalent interpretations of the concept of anonymity have hindered formal analysis of privacy in the context of PCN's [@Malavolta2017].
