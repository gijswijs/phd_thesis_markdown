# Executive summary

Bitcoin is a digital currency without a central party in control. It uses a peer-to-peer network in which participants can send transactions to each other without the need for an intermediary. Bitcoin was introduced in 2009 and with it also this new technology called blockchain. The blockchain is a data structure meant to store transactions in a immutable, distributed way. As such the blockchain acts as a public ledger for Bitcoin transaction. The success of Bitcoin, the world's first distributed cryptocurrency, has also shed light on its shortcomings. One of these shortcomings is the low throughput of 3 to 7 transactions per second. To make Bitcoin a feasible candidate for a global payment network, these numbers have to increase dramatically. 

Increasing the throughput of the blockchain itself isn't possible without decreasing the level of security currently attained by Bitcoin. Therefore, solutions have been proposed that run on top of Bitcoin, in a sort of second layer. By keeping a large subset of the transactions off-chain, without the need of being stored in the blockchain, the overall capacity for handling Bitcoin transactions can be dramatically increased. One type of solution that pivots on this principle is called payment channel network (PCN). A PCN consists of two or more participants keeping an off-chain ledger amongst themselves that keeps track of the outstanding balances between the participants. Only the opening and closing of a payment channel requires a transaction to be committed to the Bitcoin blockchain, hence enormously reducing the amount of transactions required to be committed on-chain. Theoretically improving the throughput to levels that rival or surpass current centralized global payment networks like VISA. The Lightning Network (LN) has emerged as the first real contender of being such a PCN and is currently the only PCN in production.

By definition PCNs keep the majority of the transactions off-chain. This means that those off-chain transactions aren't publicly broadcasted in the blockchain. This has the effect of improving the anonymity and privacy of the participants in LN, because there's less public, on-chain information available to use for de-anonymizing participants. Privacy and anonymity on the level of the native Bitcoin blockchain, the first layer, so to speak, is a well-studied subject. But this body of knowledge is still lacking when it comes to the payment channels networks (PCN's) like LN. 

In our research we use a definition of privacy in the context of PCN's that defines four notions of interest:

- Balance security: participants don't run the risk of losing coins to a malevolent adversary.
- Serializability: executions of a PCN are serializable as understood in concurrency control of transaction processing, i.e. for every concurrent processing of payments there exists an equivalent sequential execution.
- (Off-path) value privacy: malicious participants in the network cannot learn information about payments they aren't part of.
- (On-path) relationship anonymity: given at least one honest intermediary, corrupted intermediaries cannot determine the sender and the receiver of a transaction better than just by guessing.

Our hypothesis claims that the latter two requirements, namely value privacy and relationship anonymity are currently not being met by the LN protocol. We seek to proof this in a test network of LN clients, performing transactions with each other. By capturing the network traffic consisting of the protocol messages that these transactions entail, we seek to proof that information is obtainable from these messages that can help to identify the value of transactions and the sender and receiver to an extent that is better than just guessing. The results should provide a formal analysis of privacy in LN by means of measurable quantities of privacy loss.
\newpage
